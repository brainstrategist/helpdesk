var scr=document.getElementsByTagName("script"),zoombox_path=scr[scr.length-1].getAttribute("src").replace("zoombox.js","");!function(a){function b(){"closed"==E&&(z=!1),E="load",n(),G.test(t)?(img=new Image,img.src=t,a("body").append('<div id="zoombox_loader"></div>'),a("#zoombox_loader").css("marginTop",q()),w=window.setInterval(function(){h(img)},100)):(g(),e())}function c(){a("body").append(F),a(window).keydown(function(a){m(a.which)}),a(window).resize(function(){l()}),a("#zoombox .zoombox_mask").hide(),a("#zoombox").addClass(y.theme),a("#zoombox .zoombox_mask,.zoombox_close").click(function(){return f(),!1}),0==D?a("#zoombox .zoombox_next,#zoombox .zoombox_prev").remove():(a("#zoombox .zoombox_next").click(function(){j()}),a("#zoombox .zoombox_prev").click(function(){k()}))}function d(){var b=0,c=0;if(y.gallery){if(D===!1)return a("#zoombox .zoombox_gallery").remove(),!1;for(var d in D){var e=zoombox_path+"img/video.png",f=a('<img src="'+e+'" class="video gallery'+1*d+'"/>');G.test(D[d].attr("href"))&&(e=D[d].attr("href"),f=a('<img src="'+e+'" class="gallery'+1*d+'"/>')),f.data("id",d).appendTo("#zoombox .zoombox_gallery"),f.click(function(){i(a(this).data("id")),a("#zoombox .zoombox_gallery img").removeClass("current"),a(this).addClass("current")}),d==C&&f.addClass("current"),a("<img/>").data("img",f).attr("src",e).load(function(){b++;var d=a(this).data("img");if(d.width(Math.round(d.height()*this.width/this.height)),b==a("#zoombox .zoombox_gallery img").length){var e=0;a("#zoombox .zoombox_gallery img").each(function(){e+=a(this).outerWidth(),a(this).data("left",e)});var f=a("<div>").css({position:"absolute",top:0,left:0,width:e});a("#zoombox .zoombox_gallery").wrapInner(f),c=a("#zoombox .zoombox_gallery").width(),a("#zoombox").trigger("change")}})}a("#zoombox .zoombox_gallery").show().animate({bottom:0},y.duration)}a("#zoombox").bind("change",function(b,c){if(a("#zoombox .zoombox_gallery div").width()<a("#zoombox .zoombox_gallery").width)return!0;var d=0,e=0;null!=c?(d=y.duration,e=c.width/2):e=a("#zoombox .zoombox_gallery").width()/2;var f=-a("#zoombox .zoombox_gallery img.current").data("left")+a("#zoombox .zoombox_gallery img.current").width()/2,g=f+e;g<2*e-a("#zoombox .zoombox_gallery div").width()&&(g=2*e-a("#zoombox .zoombox_gallery div").width()),g>0&&(g=0),a("#zoombox .zoombox_gallery div").animate({left:g},d)})}function e(){if(0==z?c():a("#zoombox .zoombox_title").empty(),a("#zoombox .close").hide(),a("#zoombox .zoombox_container").removeClass("multimedia").removeClass("img").addClass(B),null!=s&&s.attr("title")&&a("#zoombox .zoombox_title").append(s.attr("title")),a("#zoombox .zoombox_content").empty(),"img"==B&&0==z&&1==y.animation&&a("#zoombox .zoombox_content").append(x),null!=s&&0!=s.find("img").length&&0==z){var b=s.find("img");a("#zoombox .zoombox_container").css({width:b.width(),height:b.height(),top:b.offset().top,left:b.offset().left,opacity:0,marginTop:b.css("marginTop")})}else null!=s&&0==z?a("#zoombox .zoombox_container").css({width:s.width(),height:s.height(),top:s.offset().top,left:s.offset().left}):0==z&&a("#zoombox .zoombox_container").css({width:100,height:100,top:o()/2-50,left:p()/2-50});var e={width:u,height:v,left:(p()-u)/2,top:(o()-v)/2,marginTop:q(),opacity:1};a("#zoombox").trigger("change",e),1==y.animation?(a("#zoombox .zoombox_title").hide(),a("#zoombox .zoombox_close").hide(),a("#zoombox .zoombox_container").animate(e,y.duration,function(){"multimedia"!=B&&1!=z||a("#zoombox .zoombox_content").append(x),"image"!=B&&1!=z||a("#zoombox .zoombox_content img").css("opacity",0).fadeTo(300,1),a("#zoombox .zoombox_title").fadeIn(300),a("#zoombox .zoombox_close").fadeIn(300),E="opened",z||d(),z=!0}),a("#zoombox .zoombox_mask").fadeTo(200,y.opacity)):(a("#zoombox .zoombox_content").append(x),a("#zoombox .zoombox_close").show(),a("#zoombox .zoombox_gallery").show(),a("#zoombox .zoombox_container").css(e),a("#zoombox .zoombox_mask").show(),a("#zoombox .zoombox_mask").css("opacity",y.opacity),z||d(),z=!0,E="opened")}function f(){E="closing",window.clearInterval(w),a(window).unbind("keydown"),a(window).unbind("resize"),"multimedia"==B&&a("#zoombox .zoombox_container").empty();var b={};if(null!=s&&s.find("img").length>0){var c=s.find("img");b={width:c.width(),height:c.height(),top:c.offset().top,left:c.offset().left,opacity:0,marginTop:c.css("marginTop")}}else b=null!=s?{width:s.width(),height:s.height(),top:s.offset().top,left:s.offset().left,marginTop:0,opacity:0}:{width:100,height:100,top:o()/2-50,left:p()/2-50,opacity:0};1==y.animation?(a("#zoombox .zoombox_mask").fadeOut(200),a("#zoombox .zoombox_gallery").animate({bottom:-a("#zoombox .zoombox_gallery").innerHeight()},y.duration),a("#zoombox .zoombox_container").animate(b,y.duration,function(){a("#zoombox").remove(),E="closed",z=!1})):(a("#zoombox").remove(),E="closed",z=!1)}function g(){0==y.overflow&&(1*u+50>p()&&(v=(p()-50)*v/u,u=p()-50),1*v+50>o()&&(u=(o()-50)*u/v,v=o()-50));var a=t;if(B="multimedia",G.test(a))B="img",x='<img src="'+t+'" width="100%" height="100%"/>';else if(H.test(a))u=300,v=40,x='<object type="application/x-shockwave-flash" data="'+MP3Player+"?son="+a+'" width="'+u+'" height="'+v+'">',x+='<param name="movie" value="'+MP3Player+"?son="+a+'" /></object>';else if(I.test(a)){var b=0;1==y.autoplay&&(b=1),x='<object type="application/x-shockwave-flash" data="'+zoombox_path+'FLVplayer.swf" width="'+u+'" height="'+v+'"><param name="allowFullScreen" value="true"><param name="scale" value="noscale"><param name="wmode" value="transparent"><param name="flashvars" value="flv='+a+"&autoplay="+b+'"><embed src="'+zoombox_path+'FLVplayer.swf" width="'+u+'" height="'+v+'" allowscriptaccess="always" allowfullscreen="true" flashvars="flv='+a+'" wmode="transparent" /></object>'}else if(J.test(a))x='<object width="'+u+'" height="'+v+'"><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="'+a+'" /><embed src="'+a+'" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="'+u+'" height="'+v+'" wmode="transparent"></embed></object>';else if(K.test(a))x='<embed src="'+a+'" width="'+u+'" height="'+v+'" controller="true" cache="true" autoplay="true"/>';else if(L.test(a))x='<embed src="'+a+'" width="'+u+'" height="'+v+'" controller="true" cache="true" autoplay="true" wmode="transparent" />';else if(M.test(a)){var c=a.split("_");c=c[0].split("/"),c=c[c.length-1]+"?",1==y.autoplay&&(c+="autoPlay=1&"),x='<iframe frameborder="0" width="'+u+'" height="'+v+'" src="http://www.dailymotion.com/embed/video/'+c+'?wmode=transparent"></iframe>'}else if(N.test(a)){var c=a.split("/");c=c[3]+"?",1==y.autoplay&&(c+="autoplay=1&"),x='<iframe src="http://player.vimeo.com/video/'+c+'title=0&amp;byline=0&amp;portrait=0&amp;wmode=transparent" width="'+u+'" height="'+v+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'}else if(O.test(a)){var c=a.split("watch?v=");c=c[1].split("&"),c=c[0]+"?",1==y.autoplay&&(c+="autoplay=1&"),x='<iframe width="'+u+'" height="'+v+'" src="http://www.youtube.com/embed/'+c+'wmode=Opaque" frameborder="0" allowfullscreen></iframe>'}else P.test(a)?(a=a.split(".html"),a=a[0],x='<object type="application/x-shockwave-flash" data="'+a+'" width="'+u+'" height="'+v+'"><param name="movie" value="'+a+'"><embed src="'+a+'" type="application/x-shockwave-flash" width="'+u+'" height="'+v+'"  wmode="transparent"></embed></object>'):x='<iframe src="'+a+'" width="'+u+'" height="'+v+'" border="0"></iframe>';return x}function h(b){b.complete&&(A=0,window.clearInterval(w),u=b.width,v=b.height,a("#zoombox_loader").remove(),g(),e()),a("#zoombox_loader").css({"background-position":"0px "+A+"px"}),A-=40,-440>A&&(A=0)}function i(c){return"opened"!=E?!1:(D&&(C=c,s=D[C],t=s.attr("href"),a("#zoombox .zoombox_gallery img").length>0&&(a("#zoombox .zoombox_gallery img").removeClass("current"),a("#zoombox .zoombox_gallery img:eq("+c+")").addClass("current")),b()),!1)}function j(){A=C+1,A>D.length-1&&(A=0),i(A)}function k(){A=C-1,0>A&&(A=D.length-1),i(A)}function l(){a("#zoombox .zoombox_container").css({top:(o()-a("#zoombox .zoombox_container").outerHeight(!0))/2,left:(p()-a("#zoombox .zoombox_container").outerWidth(!0))/2})}function m(a){37==a&&k(),39==a&&j(),27==a&&f()}function n(){if(u=y.width,v=y.height,null!=s){var a=/w([0-9]+)/,b=a.exec(s.attr("class"));null!=b&&b[1]&&(u=b[1]);var c=/h([0-9]+)/,d=c.exec(s.attr("class"));null!=d&&d[1]&&(v=d[1])}return!1}function o(){return window.innerHeight?window.innerHeight:a(window).height()}function p(){return window.innerWidth?window.innerWidth:a(window).width()}function q(){return scrOfY=0,"number"==typeof window.pageYOffset?scrOfY=window.pageYOffset:document.body&&document.body.scrollTop?scrOfY=document.body.scrollTop:document.documentElement&&document.documentElement.scrollTop&&(scrOfY=document.documentElement.scrollTop),scrOfY}var r,s,t,u,v,w,x,y={theme:"zoombox",opacity:.8,duration:800,animation:!0,width:600,height:400,gallery:!0,autoplay:!1,overflow:!1},z=!1,A=0,B="multimedia",C=!1,D=!1,E="closed",F='<div id="zoombox">             <div class="zoombox_mask"></div>            <div class="zoombox_container">                <div class="zoombox_content"></div>                <div class="zoombox_title"></div>                <div class="zoombox_next"></div>                <div class="zoombox_prev"></div>                <div class="zoombox_close"></div>            </div>            <div class="zoombox_gallery"></div>        </div>',G=/(\.jpg)|(\.jpeg)|(\.bmp)|(\.gif)|(\.png)/i,H=/(\.mp3)/i,I=/(\.flv)/i,J=/(\.swf)/i,K=/(\.mov)|(\.mp4)/i,L=/(\.wmv)|(\.avi)/i,M=/(http:\/\/www.dailymotion)|(http:\/\/dailymotion)/i,N=/(http:\/\/www.vimeo)|(http:\/\/vimeo)/i,O=/(youtube\.)/i,P=/(http:\/\/www\.koreus)|(http:\/\/koreus)/i;a.zoombox=function(a,b){},a.zoombox.options=y,a.zoombox.close=function(){f()},a.zoombox.open=function(c,d){s=null,t=c,y=a.extend({},a.zoombox.options,d),b()},a.zoombox.html=function(b,c){x=b,y=a.extend({},a.zoombox.options,c),u=y.width,v=y.height,s=null,e()},a.fn.zoombox=function(c){return r=new Array,this.each(function(){if(a.browser&&a.browser.msie&&a.browser.version<7&&!window.XMLHttpRequest)return!1;var d=this,e=/zgallery([0-9]+)/,f=/zskip/,g=e.exec(a(this).attr("class")),h=f.exec(a(this).attr("class")),i=!1;if(null!=g){r[g[1]]||(r[g[1]]=new Array),null==h&&r[g[1]].push(a(this));var j=r[g[1]].length-1;i=r[g[1]]}a(this).unbind("click").click(function(){return y=a.extend({},a.zoombox.options,c),"closed"!=E?!1:(null!=h?j<r[g[1]].length-1&&(s=r[g[1]][j+1]):s=a(d),D=i,t=s.attr("href"),C=j,b(),!1)})})}}(jQuery);